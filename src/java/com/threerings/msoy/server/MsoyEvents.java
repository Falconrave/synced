//
// $Id$

package com.threerings.msoy.server;

import java.io.Serializable;

import com.samskivert.util.StringUtil;

import com.threerings.panopticon.common.BaseEvent;

/**
 * Logging events generated by the Whirled server.
 */
public class MsoyEvents
{
    public static class CurrentMemberStats extends MsoyEvent
    {
        public String serverName;
        public int total;
        public int active;
        public int guests;
        public int viewers;
    }

    public static class Login extends MsoyEvent
    {
        public int memberId;
        public boolean firstLogin;
        public String sessionToken;
        public long createdOn;
    }

    public static class Logout extends MsoyEvent
    {
        public int memberId;
        public String sessionToken;
        public int activeSeconds;
        public int idleSeconds;
    }

    public static class MailSent extends MsoyEvent
    {
        public int senderId;
        public int recipientId;
        public int payloadType;
    }

    public static class FlowTransaction extends MsoyEvent
    {
        public int memberId;
        public int actionType;
        public int itemId;
        public int itemType;
        public int deltaFlow;
        public int newtotal;
    }

    public static class ItemPurchase extends MsoyEvent
    {
        public int memberId;
        public byte itemType;
        public int itemId;
        public int flowCost;
        public int goldCost;
    }

    public static class ItemCatalogListing extends MsoyEvent
    {
        public int creatorId;
        public byte itemType;
        public int itemId;
        public int flowCost;
        public int goldCost;
        public int pricing;
        public int salesTarget;
    }

    public static class FriendshipAction extends MsoyEvent
    {
        public int memberId;
        public int friendId;
        public boolean isAdded;
    }

    public static class GroupMembershipAction extends MsoyEvent
    {
        public int memberId;
        public int groupId;
        public boolean isJoined;
    }

    public static class GroupRankModification extends MsoyEvent
    {
        public int memberId;
        public int groupId;
        public byte newRank;
    }
    
    public static class GamePlayed extends MsoyEvent
    {
        public int gameGenre;
        public int gameId;
        public int itemId;
        public int payout;
        public int secondsPlayed;
    }

    public static class TrophyEarned extends MsoyEvent
    {
        public int recipientId;
        public int gameId;
        public String trophyIdent;
    }

    public static class PrizeEarned extends MsoyEvent
    {
        public int recipientId;
        public int gameId;
        public String prizeIdent;
        public byte prizeItemType;
    }

    public static class InviteSent extends MsoyEvent
    {
        public String inviteId;
        public int inviterId;
        public String recipient;
    }

    public static class InviteViewed extends MsoyEvent
    {
        public String inviteId;
    }

    public static class AccountCreated extends MsoyEvent
    {
        public int newMemberId;
        public String inviteId;
    }

    public static class RoomUpdated extends MsoyEvent
    {
        public int memberId;
        public int sceneId;
    }

    public static class ProfileUpdated extends MsoyEvent
    {
        public int memberId;
    }

    protected static class MsoyEvent extends BaseEvent
        implements Serializable
    {
        public String getName () {
            String name = getClass().getName();
            return name.substring(name.lastIndexOf("$")+1);
        }

        public String toString () {
            return getName() + StringUtil.fieldsToString(this);
        }
    }
}
