<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../../../style.css" type="text/css" media="screen">
<link rel="stylesheet" href="../../../print.css" type="text/css" media="print">
<meta content="HostCoordinator,com.threerings.ezgame.HostCoordinator,STATUS_UNKNOWN,STATUS_HOST,STATUS_NOT_HOST,HOST_NAME,_control,_showDebug,status,occupantEntered,occupantLeft,propertyChanged,getHostId,tryReplaceHost,debugLog,debugHostStatus" name="keywords">
<title>com.threerings.ezgame.HostCoordinator</title>
</head>
<body>
<script type="text/javascript" language="javascript" src="../../../asdoc.js"></script><script type="text/javascript" language="javascript" src="../../../cookies.js"></script><script type="text/javascript" language="javascript">
<!--
				asdocTitle = 'HostCoordinator - API Documentation';
				var baseRef = '../../../';
				window.onload = configPage;
			--></script>
<table style="display:none" id="titleTable" cellspacing="0" cellpadding="0" class="titleTable">
<tr>
<td align="left" class="titleTableTitle">API Documentation</td><td align="right" class="titleTableTopNav"><a onclick="loadClassListFrame('../../../all-classes.html')" href="../../../package-summary.html">All&nbsp;Packages</a>&nbsp;|&nbsp;<a onclick="loadClassListFrame('../../../all-classes.html')" href="../../../class-summary.html">All&nbsp;Classes</a>&nbsp;|&nbsp;<a onclick="loadClassListFrame('../../../index-list.html')" href="../../../all-index-A.html">Index</a>&nbsp;|&nbsp;<a href="../../../index.html?com/threerings/ezgame/HostCoordinator.html&amp;com/threerings/ezgame/class-list.html" id="framesLink1">Frames</a><a onclick="parent.location=document.location" href="" style="display:none" id="noFramesLink1">No&nbsp;Frames</a></td><td rowspan="3" align="right" class="titleTableLogo"><img alt="Adobe Logo" title="Adobe Logo" class="logoImage" src="../../../images/logo.jpg"></td>
</tr>
<tr class="titleTableRow2">
<td align="left" id="subTitle" class="titleTableSubTitle">Class&nbsp;HostCoordinator</td><td align="right" id="subNav" class="titleTableSubNav"><a href="#propertySummary">Properties</a>&nbsp;| <a href="#methodSummary">Methods</a>&nbsp;| <a href="#constantSummary">Constants</a></td>
</tr>
<tr class="titleTableRow3">
<td colspan="2">&nbsp;</td>
</tr>
</table>
<script type="text/javascript" language="javascript">
<!--
if (!isEclipse() || window.name != ECLIPSE_FRAME_NAME) {titleBar_setSubTitle("ClassÂ HostCoordinator"); titleBar_setSubNav(true,true,false,false,false,false,true,false,false,false,false,false,false,false);}
--></script>
<div class="MainContent">
<table cellspacing="0" cellpadding="0" class="classHeaderTable">
<tr>
<td class="classHeaderTableLabel">Package</td><td><a onclick="javascript:loadClassListFrame('class-list.html')" href="package-detail.html">com.threerings.ezgame</a></td>
</tr>
<tr>
<td class="classHeaderTableLabel">Class</td><td class="classSignature">public class HostCoordinator</td>
</tr>
<tr>
<td class="classHeaderTableLabel">Inheritance</td><td class="inheritanceList">HostCoordinator <img class="inheritArrow" alt="Inheritance" title="Inheritance" src="../../../images/inherit-arrow.gif"> flash.events.EventDispatcher</td>
</tr>
<tr>
<td class="classHeaderTableLabel">Implements</td><td><a href="OccupantChangedListener.html">OccupantChangedListener</a>, <a href="PropertyChangedListener.html">PropertyChangedListener</a></td>
</tr>
</table>
<p></p>
 HostCoordinator provides methods for determining whether the current client should consider
 itself the authority in dealing with game state (for example, when dealing out cards, or setting
 up the game board).
  Current hosting state can be retrieved from the /status/ property.  Please note that hosting
 authority can be transferred between clients at any moment, so all clients should be prepared to
 suddenly take over host responsibilities.
  Additionally, the client can register itself for notifications about changes to the /status/
 property - see HostEvent.
  Usage example:
  <pre>
 _coord = new HostCoordinator (_gameCtrl);
 _coord.addEventListener (HostEvent.CLAIMED, firstHostHandler);
 _coord.addEventListener (HostEvent.CHANGED, hostChangeHandler);
  ...
  function firstHostHandler (event : HostEvent) {
     if (_coord.status == HostCoordinator.STATUS_HOST) {
         // I'm the first host in the game - I should set up the initial board, etc.
     }
 }
  function hostChangeHandler (event : HostEvent) {
     if (_coord.status == HostCoordinator.STATUS_HOST) {
         // I just became the host - do whatever is needed.
     }
 }
 </pre>
 <p></p>
<br>
<hr>
</div>
<a name="propertySummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Public Properties</div>
<table id="summaryTableProperty" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Property</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#status">status</a> : String<div class="summaryTableDescription">[read-only]
     Retrieves current host coordination status, as one of the STATUS_constants.</div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
</table>
</div>
<a name="protectedPropertySummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Protected Properties</div>
<table id="summaryTableProtectedProperty" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Property</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#_control">_control</a> : <a href="../ezgame/EZGameControl.html">EZGameControl</a> = null<div class="summaryTableDescription"> Controller storage </div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#HOST_NAME">HOST_NAME</a> : String = "_host_name"<div class="summaryTableDescription"> Magic key that stores current authoritative host </div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#_showDebug">_showDebug</a> : Boolean<div class="summaryTableDescription"> Debug flag </div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
</table>
</div>
<a name="methodSummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Public Methods</div>
<table id="summaryTableMethod" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Method</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#HostCoordinator()">HostCoordinator</a>(control:<a href="EZGameControl.html">EZGameControl</a>, showDebug:Boolean = false)</div>
<div class="summaryTableDescription">
     Constructor, expects an initialized instance of EZGameControl.</div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#occupantEntered()">occupantEntered</a>(event:<a href="OccupantChangedEvent.html">OccupantChangedEvent</a>):void</div>
<div class="summaryTableDescription"></div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#occupantLeft()">occupantLeft</a>(event:<a href="OccupantChangedEvent.html">OccupantChangedEvent</a>):void</div>
<div class="summaryTableDescription"></div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#propertyChanged()">propertyChanged</a>(event:<a href="PropertyChangedEvent.html">PropertyChangedEvent</a>):void</div>
<div class="summaryTableDescription"></div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
</table>
</div>
<a name="protectedMethodSummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Protected Methods</div>
<table id="summaryTableProtectedMethod" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Method</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#debugHostStatus()">debugHostStatus</a>():void</div>
<div class="summaryTableDescription"> Debug only </div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#debugLog()">debugLog</a>(message:String):void</div>
<div class="summaryTableDescription"> Debug only </div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#getHostId()">getHostId</a>(claimIfAvailable:Boolean = false):Number</div>
<div class="summaryTableDescription">
     Retrieves and returns current host's playerId.</div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#tryReplaceHost()">tryReplaceHost</a>(hostId:Object):void</div>
<div class="summaryTableDescription">
     Helper function: tries to set the host variable to the client's id, if the current value is
     equal to /hostId/.</div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
</table>
</div>
<a name="constantSummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Public Constants</div>
<table id="summaryTableConstant" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Constant</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#STATUS_HOST">STATUS_HOST</a> : String = "STATUS_HOST"<div class="summaryTableDescription">[static] Status constant, means that this client is the current host.</div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#STATUS_NOT_HOST">STATUS_NOT_HOST</a> : String = "STATUS_NOT_HOST"<div class="summaryTableDescription">[static] Status constant, means that some other client is the current host.</div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#STATUS_UNKNOWN">STATUS_UNKNOWN</a> : String = "STATUS_UNKNOWN"<div class="summaryTableDescription">[static] Status constant, means that the current status is unknown, either because the data had not
     yet arrived from the server, or because nobody claims to be host for this game.</div>
</td><td class="summaryTableOwnerCol">HostCoordinator</td>
</tr>
</table>
</div>
<script type="text/javascript" language="javascript">
<!--
showHideInherited();
--></script>
<div class="MainContent">
<a name="propertyDetail"></a>
<div class="detailSectionHeader">Property detail</div>
<a name="_control"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">_control</td><td class="detailHeaderType">property</td>
</tr>
</table>
<div class="detailBody">
<code>protected var _control:<a href="../ezgame/EZGameControl.html">EZGameControl</a> = null</code><p> Controller storage </p></div>
<a name="HOST_NAME"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">HOST_NAME</td><td class="detailHeaderType">property</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>protected var HOST_NAME:String = "_host_name"</code><p> Magic key that stores current authoritative host </p></div>
<a name="_showDebug"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">_showDebug</td><td class="detailHeaderType">property</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>protected var _showDebug:Boolean</code><p> Debug flag </p></div>
<a name="status"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">status</td><td class="detailHeaderType">property</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>status:String</code>&nbsp;&nbsp;[read-only]<p>
     Retrieves current host coordination status, as one of the STATUS_constants.
     If the current host is not known, or had abandoned the game, the client will silently
     try to claim the host role while returning this status property.
          Note: do not save the value of this property. Hosting status can change at any moment: when
     the current host quits the game, any client can suddenly become the new host.
     </p><span class="label">Implementation</span>
<br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;public function get status():String</code>
<br>
</div>
<a name="constructorDetail"></a>
<div class="detailSectionHeader">Constructor detail</div>
<a name="HostCoordinator()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">HostCoordinator</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">constructor</td>
</tr>
</table>
<div class="detailBody">
<code>public function HostCoordinator(control:<a href="EZGameControl.html">EZGameControl</a>, showDebug:Boolean = false)</code><p>
     Constructor, expects an initialized instance of EZGameControl.  If the optional showDebug
     flag is set, it will display host info as chat messages (only useful for debugging).
     </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">control</span>:<a href="EZGameControl.html">EZGameControl</a></code></td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">showDebug</span>:Boolean</code> (default = <code>false</code>)<code></code></td>
</tr>
</table>
</div>
<a name="methodDetail"></a>
<div class="detailSectionHeader">Method detail</div>
<a name="debugHostStatus()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">debugHostStatus</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td>
</tr>
</table>
<div class="detailBody">
<code>protected function debugHostStatus():void</code><p> Debug only </p></div>
<a name="debugLog()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">debugLog</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>protected function debugLog(message:String):void</code><p> Debug only </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">message</span>:String</code></td>
</tr>
</table>
</div>
<a name="getHostId()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">getHostId</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>protected function getHostId(claimIfAvailable:Boolean = false):Number</code><p>
     Retrieves and returns current host's playerId. If the current host is unknown or
     no longer in the game, returns 0.
          If the claimIfAvailable flag is set, and the host role is available (either because
     no previous host has been recorded, or the currently known host had abandoned the game),
     the current client will try to claim the host role. 
     </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">claimIfAvailable</span>:Boolean</code> (default = <code>false</code>)<code></code></td>
</tr>
</table>
<p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code>Number</code></td>
</tr>
</table>
</div>
<a name="occupantEntered()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">occupantEntered</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function occupantEntered(event:<a href="OccupantChangedEvent.html">OccupantChangedEvent</a>):void</code><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">event</span>:<a href="OccupantChangedEvent.html">OccupantChangedEvent</a></code></td>
</tr>
</table>
</div>
<a name="occupantLeft()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">occupantLeft</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function occupantLeft(event:<a href="OccupantChangedEvent.html">OccupantChangedEvent</a>):void</code><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">event</span>:<a href="OccupantChangedEvent.html">OccupantChangedEvent</a></code></td>
</tr>
</table>
</div>
<a name="propertyChanged()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">propertyChanged</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function propertyChanged(event:<a href="PropertyChangedEvent.html">PropertyChangedEvent</a>):void</code><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">event</span>:<a href="PropertyChangedEvent.html">PropertyChangedEvent</a></code></td>
</tr>
</table>
</div>
<a name="tryReplaceHost()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">tryReplaceHost</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>protected function tryReplaceHost(hostId:Object):void</code><p>
     Helper function: tries to set the host variable to the client's id, if the current value is
     equal to /hostId/. If the value of null for hostId has the meaning of "set me as host only
     if the role has not been claimed yet".
     </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">hostId</span>:Object</code></td>
</tr>
</table>
</div>
<a name="constantDetail"></a>
<div class="detailSectionHeader">Constant detail</div>
<a name="STATUS_HOST"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">STATUS_HOST</td><td class="detailHeaderType">constant</td>
</tr>
</table>
<div class="detailBody">
<code>public static const STATUS_HOST:String = "STATUS_HOST"</code><p> Status constant, means that this client is the current host. </p></div>
<a name="STATUS_NOT_HOST"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">STATUS_NOT_HOST</td><td class="detailHeaderType">constant</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public static const STATUS_NOT_HOST:String = "STATUS_NOT_HOST"</code><p> Status constant, means that some other client is the current host. </p></div>
<a name="STATUS_UNKNOWN"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">STATUS_UNKNOWN</td><td class="detailHeaderType">constant</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public static const STATUS_UNKNOWN:String = "STATUS_UNKNOWN"</code><p> Status constant, means that the current status is unknown, either because the data had not
     yet arrived from the server, or because nobody claims to be host for this game. </p></div>
<br>
<br>
<hr>
<br>
<p></p>
<center class="copyright"> 
</center>
</div>
</body>
</html>
<!-- -->
